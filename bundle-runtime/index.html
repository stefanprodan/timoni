
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Timoni is a package manager for Kubernetes powered by CUE lang.
">
      
      
        <meta name="author" content="Stefan Prodan">
      
      
        <link rel="canonical" href="https://timoni.sh/bundle-runtime/">
      
      
        <link rel="prev" href="../bundle/">
      
      
        <link rel="next" href="../bundle-distribution/">
      
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Bundle runtime - Timoni</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<meta property="og:url" content="https://timoni.sh/bundle-runtime/">
<meta property="og:image" content="https://timoni.sh/images/logo_card.png">
<meta property="og:image:alt" content="timoni.sh">
<meta property="og:image:type" content="image/png">

<meta property="og:title" content="Bundle runtime">
<meta property="og:description" content="Timoni is a package manager for Kubernetes powered by CUE lang.
">


<meta name="twitter:site" content="@stefanprodan">
<meta name="twitter:creator" content="@stefanprodan">
<meta name="twitter:image:alt" content="timoni.sh">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://timoni.sh/images/logo.png">
<meta property="twitter:title" content="Bundle runtime">
<meta property="twitter:description" content="Timoni is a package manager for Kubernetes powered by CUE lang.
">



  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bundle-runtime" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Timoni" class="md-header__button md-logo" aria-label="Timoni" data-md-component="logo">
      
  <img src="../images/logo_indigo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Timoni
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bundle runtime
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/stefanprodan/timoni" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    stefanprodan/timoni
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../quickstart/" class="md-tabs__link">
          
  
  Documentation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cue/introduction/" class="md-tabs__link">
          
  
  CUE Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cmd/timoni/" class="md-tabs__link">
          
  
  CLI Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Timoni" class="md-nav__button md-logo" aria-label="Timoni" data-md-component="logo">
      
  <img src="../images/logo_indigo.svg" alt="logo">

    </a>
    Timoni
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stefanprodan/timoni" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    stefanprodan/timoni
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compared to other tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    App Delivery
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            App Delivery
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bundle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundle files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Bundle runtime
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Bundle runtime
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-runtime-spec" class="md-nav__link">
    <span class="md-ellipsis">
      Writing a Runtime spec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing a Runtime spec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-version" class="md-nav__link">
    <span class="md-ellipsis">
      API version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name" class="md-nav__link">
    <span class="md-ellipsis">
      Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Clusters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#values" class="md-nav__link">
    <span class="md-ellipsis">
      Values
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    <span class="md-ellipsis">
      Query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for" class="md-nav__link">
    <span class="md-ellipsis">
      For
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional" class="md-nav__link">
    <span class="md-ellipsis">
      Optional
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-values-from-kubernetes-api" class="md-nav__link">
    <span class="md-ellipsis">
      Using values from Kubernetes API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-values-from-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Using values from environment variables
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bundle-distribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundle distribution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bundle-secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundle secrets injection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bundle-multi-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-cluster deployments
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    App Packaging
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            App Packaging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Module specification
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../github-actions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub Actions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flux-aio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flux AIO Distribution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flux-helm-interop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helm Interoperability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gitops-flux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitOps with Flux
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CUE Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            CUE Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/walkthrough/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CUE Walkthrough
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Module Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Module Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/initialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get started with modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/immutable-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Immutable ConfigMaps and Secrets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/custom-resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add custom resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/semver-constraints/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster version constraints
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/apply-behavior/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control the apply behavior
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/test-jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run tests with Kubernetes Jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/import-resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import resources from YAML
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Module Distribution
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Module Distribution
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/publishing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publishing module versions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/signing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Signing and Verification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cue/module/github-actions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub Actions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLI Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            CLI Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni version
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Instance
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Instance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_apply/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni apply
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni build
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni delete
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni list
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_inspect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni inspect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_inspect_module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni inspect module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_inspect_values/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni inspect values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_inspect_resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni inspect resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni status
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Module
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Module
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_init/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod init
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_push/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod push
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_pull/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod pull
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod list
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_vet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod vet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_vendor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod vendor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_vendor_k8s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod vendor k8s
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_mod_vendor_crd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni mod vendor crd
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bundle
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Bundle
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_bundle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni bundle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_bundle_apply/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni bundle apply
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_bundle_build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni bundle build
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_bundle_delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni bundle delete
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_bundle_status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni bundle status
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_bundle_vet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni bundle vet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Runtime
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Runtime
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_runtime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni runtime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_runtime_build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni runtime build
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Registry
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Registry
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni registry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_registry_login/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni registry login
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_registry_logout/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni registry logout
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Artifact
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Artifact
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_artifact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni artifact
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_artifact_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni artifact list
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_artifact_push/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni artifact push
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_artifact_pull/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni artifact pull
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_artifact_tag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni artifact tag
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Completion
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Completion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_completion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni completion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_completion_bash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni completion bash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_completion_fish/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni completion fish
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_completion_powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni completion powershell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/timoni_completion_zsh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timoni completion zsh
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-runtime-spec" class="md-nav__link">
    <span class="md-ellipsis">
      Writing a Runtime spec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing a Runtime spec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-version" class="md-nav__link">
    <span class="md-ellipsis">
      API version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name" class="md-nav__link">
    <span class="md-ellipsis">
      Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Clusters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#values" class="md-nav__link">
    <span class="md-ellipsis">
      Values
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    <span class="md-ellipsis">
      Query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for" class="md-nav__link">
    <span class="md-ellipsis">
      For
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional" class="md-nav__link">
    <span class="md-ellipsis">
      Optional
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-values-from-kubernetes-api" class="md-nav__link">
    <span class="md-ellipsis">
      Using values from Kubernetes API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-values-from-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Using values from environment variables
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="bundle-runtime">Bundle Runtime</h1>
<p>While Timoni <a href="../bundle/">Bundles</a> offer a way to specify the config values in declarative manner,
not all the configuration values of an application are known ahead of time.
Some values may be available at runtime, in the Kubernetes clusters where the Bundle is applied.</p>
<p>For example, the API token for some backend service that your app consumes is stored in
a Kubernetes Secret in-cluster. When installing the application with Timoni,
you may want to fetch the token from the Kubernetes Secret and use it as a config value.</p>
<p>Timoni Runtime API offers a way to define values which are fetched from the Kubernetes API
and mapped to fields inside a Bundle.</p>
<h2 id="example">Example</h2>
<p>The following is an example of a Runtime definition that extracts values from the cluster.</p>
<div class="highlight"><pre><span></span><code><span class="nx">runtime</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;production&quot;</span>
<span class="w">    </span><span class="nx">clusters</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// using the cluster set in kubeconfig current context</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;k8s:v1:ConfigMap:infra:aws-info&quot;</span>
<span class="w">            </span><span class="k">for</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">&quot;ACCOUNT_ID&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;obj.data.account_id&quot;</span>
<span class="w">                </span><span class="s">&quot;REGION&quot;</span><span class="p">:</span><span class="w">     </span><span class="s">&quot;obj.data.region&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;k8s:v1:Secret:infra:redis-auth&quot;</span>
<span class="w">            </span><span class="k">for</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">&quot;REDIS_PASS&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;obj.data.password&quot;</span>
<span class="w">                </span><span class="s">&quot;REDIS_CA&quot;</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;obj.data.\&quot;ca.crt\&quot;&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>The values from the Runtime, can be mapped to fields in a Bundle using <code>@timoni()</code> attributes.</p>
<div class="highlight"><pre><span></span><code><span class="nx">bundle</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_id</span><span class="p">:</span><span class="w">   </span><span class="kt">string</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">ACCOUNT_ID</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_reg</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">REGION</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_pass</span><span class="p">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">REDIS_PASS</span><span class="p">)</span>

<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;podinfo&quot;</span>
<span class="w">    </span><span class="nx">instances</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">podinfo</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">module</span><span class="p">:</span><span class="w"> </span><span class="nx">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oci://\(_id).dkr.ecr.\(_reg).amazonaws.com/modules/podinfo&quot;</span>
<span class="w">            </span><span class="nx">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;podinfo&quot;</span>
<span class="w">            </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="nx">caching</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">enabled</span><span class="p">:</span><span class="w">  </span><span class="kc">true</span>
<span class="w">                </span><span class="nx">redisURL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tcp://:\(_pass)@redis.infra:6379&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Assuming the ConfigMaps and Secrets are in the cluster,
and the Runtime file is <code>runtime.cue</code> and the Bundle file is <code>bundle.cue</code>.</p>
<p>Build the runtime to see which values are present on the cluster:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">command</label><label for="__tabbed_1_2">output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>timoni<span class="w"> </span>runtime<span class="w"> </span>build<span class="w"> </span>-f<span class="w"> </span>runtime.cue
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>ACCOUNT_ID: 1234567890
REGION: us-west-2
REDIS_PASS: password
REDIS_CA:
  -----BEGIN CERTIFICATE-----
  MIIC/jCCAeagAwIBAgIBADANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDEwprdWJl
  cm5ldGVzMB4XDTIzMDgxMDE1MTA1MFoXDTMzMDgwNzE1MTA1MFowFTETMBEGA1UE
  AxMKa3ViZXJuZXRlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJgA
  mOniTayGyXG51eYeb1oJGCszRlZv4ci2kzLC0H4YCph6TXDEawrsvyuzGe7fwp4t
  Jq2fQiJgKbibOjHcOwhYqp1lJDu37p6WsLvx/RxbkHoVX8X2n7n1BVS5MbQ81on9
  BdXkff71g8n3HmJo8ZN1abEW434tHFwjjGMDzFoqxTnNM+qMKegxAtTPVbjV4X+5
  4/95L7T0XNd97XnunSUAEJRroMTRuaBAcYz81N0ix3Mc0T+G16aV127R0ZFkPlS8
  bzjA1NGgbiveX7i7n9mNG4Gy7iElP0iidtdrA6loxWYLW1jmEH5/pWQnki7s3OrK
  /94xrQ2MaDpXUzcoc0cCAwEAAaNZMFcwDgYDVR0PAQH/BAQDAgKkMA8GA1UdEwEB
  /wQFMAMBAf8wHQYDVR0OBBYEFJ7f9QzKWA/BQJSRinKne4FZNzScMBUGA1UdEQQO
  MAyCCmt1YmVybmV0ZXMwDQYJKoZIhvcNAQELBQADggEBAAhGgYFB90Rkexgh56q8
  n8uC4XQF6OTJJf/4A9VXNbiZhG+PUYkMUyqeOSOq+IztJVOffuG9ZutYQtJYCX7g
  TUQmZxeKAw1MAMEWAELmNVdbG6Y6YZ14v8SI+TADqeqcIkmDEkACygfeHKdEFOfV
  LoRAc3Zn32byP5M6EVjTXWvb+UbVt7umoBOCbMo3BEF71TEDI5Oww6y3YxDM9/Y7
  MCTu+0XHZNGDgprmci6fzLv8PV0C6eiuUrrBM237WOfk4BYL6pmCDcCWo6aP2cH7
  Y5zcVBxKUs/h5bZfLJFuwXJC5zWudNLOAtNtFhctMwDoNaKYq720g/GmEroq4wgA
  tBI=
  -----END CERTIFICATE-----
</code></pre></div>
</div>
</div>
</div>
<p>Apply the Bundle using the values from the Runtime:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">command</label><label for="__tabbed_2_2">output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>timoni<span class="w"> </span>bundle<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>bundle.cue<span class="w"> </span>--runtime<span class="w"> </span>runtime.cue
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>applying instance podinfo
pulling oci://1234567890.dkr.ecr.us-west-2.amazonaws.com/modules/podinfo
using module timoni.sh/podinfo version 6.3.5
installing podinfo in namespace podinfo
ServiceAccount/podinfo/podinfo created
Service/podinfo/podinfo created
Deployment/podinfo/podinfo created
waiting for 3 resource(s) to become ready...
resources are ready
</code></pre></div>
</div>
</div>
</div>
<h2 id="writing-a-runtime-spec">Writing a Runtime spec</h2>
<p>A Runtime file must contain a definition that matches the following schema:</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="nx">Runtime</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="kt">string</span>

<span class="w">    </span><span class="nx">clusters</span><span class="err">?</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="kt">string</span><span class="p">]:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">group</span><span class="p">!:</span><span class="w">       </span><span class="kt">string</span>
<span class="w">        </span><span class="nx">kubeContext</span><span class="p">!:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">values</span><span class="err">?</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="err">#</span><span class="nx">RuntimeValue</span><span class="p">]</span>
<span class="p">}</span>

<span class="err">#</span><span class="nx">RuntimeValue</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">query</span><span class="p">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="k">for</span><span class="p">:</span><span class="w"> </span><span class="p">{[</span><span class="kt">string</span><span class="p">]:</span><span class="w"> </span><span class="kt">string</span><span class="p">}</span>
<span class="w">    </span><span class="nx">optional</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="kc">false</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">bool</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="api-version">API version</h3>
<p>The <code>apiVersion</code> is a required field that specifies the version of the Runtime schema.</p>
<p>Currently, the only supported value is <code>v1alpha1</code>.</p>
<h3 id="name">Name</h3>
<p>The <code>name</code> is a required field used to identify the Runtime.</p>
<h3 id="clusters">Clusters</h3>
<p>The <code>clusters</code> field is for defining the target clusters and
environments (group of clusters) where a Bundle is applied.</p>
<p>A cluster entry must specify the <code>group</code> and <code>kubeContext</code> fields.
The <code>kubeContext</code> value must match a context name from the <code>.kube/config</code> file.</p>
<div class="admonition tip">
<p class="admonition-title">Default cluster</p>
<p>When no clusters are defined in the Runtime, Timoni will use the
current context from the kubeconfig, unless the context is specifed
using the <code>--kube-context</code> flag.</p>
</div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nx">runtime</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;fleet&quot;</span>
<span class="w">    </span><span class="nx">clusters</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;preview-us-1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">group</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;staging&quot;</span>
<span class="w">            </span><span class="nx">kubeContext</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eks-us-west-2&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="s">&quot;prod-us-1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">group</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;production&quot;</span>
<span class="w">            </span><span class="nx">kubeContext</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eks-us-west-1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="s">&quot;prod-eu-1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">group</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;production&quot;</span>
<span class="w">            </span><span class="nx">kubeContext</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eks-eu-west-1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The clusters name and group, can be mapped to fields in a Bundle using <code>@timoni()</code> attributes.</p>
<div class="highlight"><pre><span></span><code><span class="nx">bundle</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_cluster</span><span class="p">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">TIMONI_CLUSTER_NAME</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_env</span><span class="p">:</span><span class="w">     </span><span class="kt">string</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">TIMONI_CLUSTER_GROUP</span><span class="p">)</span>

<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;apps&quot;</span>
<span class="w">    </span><span class="nx">instances</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">app</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">module</span><span class="p">:</span><span class="w"> </span><span class="nx">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oci://ghcr.io/stefanprodan/modules/podinfo&quot;</span>
<span class="w">            </span><span class="nx">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;apps&quot;</span>
<span class="w">            </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">ui</span><span class="p">:</span><span class="w"> </span><span class="nx">message</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hosted by \(_cluster)&quot;</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="nx">_env</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;staging&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">replicas</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="nx">_env</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;production&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">replicas</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>When applying the above Bundle, Timoni will deploy the app instances to all the
clusters, in the order defined in the Runtime. If the apply fails on a staging cluster,
Timoni will stop the execution and not continue with production.</p>
<p>For more details please see the <a href="../bundle-multi-cluster/">multi-cluster deployments guide</a>.</p>
<h3 id="values">Values</h3>
<p>The <code>values</code> array is for specifying
the list of Kubernetes resources and the fields to be extracted.</p>
<h4 id="query">Query</h4>
<p>The <code>values.query</code> is a required field that specifies the Kubernetes resource.</p>
<p>The <code>query</code> field must be in the format <code>k8s:&lt;apiVersion&gt;:&lt;kind&gt;:&lt;namespace&gt;:&lt;name&gt;</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nx">runtime</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;production&quot;</span>
<span class="w">    </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;k8s:v1:Secret:infra:redis-auth&quot;</span>
<span class="w">            </span><span class="k">for</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">&quot;REDIS_PASS&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;obj.data.password&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>If the Kubernetes resource is global, the <code>query</code> format is <code>k8s:&lt;apiVersion&gt;:&lt;kind&gt;:&lt;name&gt;</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nx">runtime</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;production&quot;</span>
<span class="w">    </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;k8s:cert-manager.io/v1:ClusterIssuer:letsencrypt&quot;</span>
<span class="w">            </span><span class="k">for</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">&quot;ISSUER_EMAIL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;obj.spec.acme.email&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="for">For</h4>
<p>The <code>values.for</code> is a required map that specifies which fields to be extracted from the Kubernetes resource.</p>
<p>The <code>for</code> map must contain pairs of name and CUE expression.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nx">runtime</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;production&quot;</span>
<span class="w">    </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">query</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;k8s:source.toolkit.fluxcd.io/v1:GitRepository:flux-system:cluster&quot;</span>
<span class="w">            </span><span class="k">for</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">&quot;GIT_REVISION&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;obj.status.artifact.revision&quot;</span>
<span class="w">                </span><span class="s">&quot;GIT_STATUS&quot;</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;[for c in obj.status.conditions if c.type == \&quot;Ready\&quot; {c.status}][0]&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>The CUE expression must result in a concrete value of type <code>string</code>, <code>number</code> or <code>bool</code>.</p>
<h4 id="optional">Optional</h4>
<p>The <code>optional</code> field can be set to <code>true</code> and Timoni will skip
not found Kubernetes resources instead of throwing an error.</p>
<h2 id="using-values-from-kubernetes-api">Using values from Kubernetes API</h2>
<p>The values defined in a Runtime can be referred in Bundles using CUE attributes.</p>
<p>The <code>@timoni(runtime:[string|number|bool]:[VAR_NAME])</code> CUE attribute can be placed next
to a field to set its value from the runtime.</p>
<div class="highlight"><pre><span></span><code><span class="nx">bundle</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;app&quot;</span>
<span class="w">    </span><span class="nx">instances</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">app</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">module</span><span class="p">:</span><span class="w"> </span><span class="nx">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oci://localhost:5000/modules/app&quot;</span>
<span class="w">            </span><span class="nx">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;apps&quot;</span>
<span class="w">            </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">host</span><span class="p">:</span><span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">HOST</span><span class="p">)</span>
<span class="w">                </span><span class="nx">enabled</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="w">   </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">bool</span><span class="p">:</span><span class="nx">ENABLED</span><span class="p">)</span>
<span class="w">                </span><span class="nx">score</span><span class="p">:</span><span class="w">   </span><span class="kt">int</span><span class="w">    </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="nx">number</span><span class="p">:</span><span class="nx">SCORE</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>If a runtime value is optional, you can provide defaults which will be used
only if the runtime doesn't contain the referenced value:</p>
<div class="highlight"><pre><span></span><code><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">host</span><span class="p">:</span><span class="w">    </span><span class="s">&quot;example.com&quot;</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">HOST</span><span class="p">)</span>
<span class="w">    </span><span class="nx">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">          </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">bool</span><span class="p">:</span><span class="nx">ENABLED</span><span class="p">)</span>
<span class="w">    </span><span class="nx">score</span><span class="p">:</span><span class="w">   </span><span class="mi">1</span><span class="w">             </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="nx">number</span><span class="p">:</span><span class="nx">SCORE</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>To load the runtime values at apply time, use the <code>--runtime</code> flag:</p>
<div class="highlight"><pre><span></span><code>timoni<span class="w"> </span>bundle<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>bundle.cue<span class="w"> </span>--runtime<span class="w"> </span>runtime.cue
</code></pre></div>
<p>At apply time, Timoni injects the fields values from the runtime,
if a specified runtime var is not found and if a default is not provided,
the apply with fail with an <code>incomplete value</code> error.</p>
<h2 id="using-values-from-environment-variables">Using values from environment variables</h2>
<p>To use values from environment variables,
the environment must contain variables which match the CUE attributes.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nx">bundle</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1alpha1&quot;</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;app&quot;</span>
<span class="w">    </span><span class="nx">instances</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">app</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">module</span><span class="p">:</span><span class="w"> </span><span class="nx">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oci://localhost:5000/modules/app&quot;</span>
<span class="w">            </span><span class="nx">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;apps&quot;</span>
<span class="w">            </span><span class="nx">values</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">sshKey</span><span class="p">:</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">string</span><span class="p">:</span><span class="nx">SSH_KEY</span><span class="p">)</span>
<span class="w">                </span><span class="nx">isAdmin</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">  </span><span class="err">@</span><span class="nx">timoni</span><span class="p">(</span><span class="nx">runtime</span><span class="p">:</span><span class="kt">bool</span><span class="p">:</span><span class="nx">IS_ADMIN</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Export the env vars and run the <code>timoni bundle apply --runtime-from-env</code> command.</p>
<div class="highlight"><pre><span></span><code>EXPORT<span class="w"> </span><span class="nv">SSH_KEY</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span>.ssh/id_ecdsa.pub<span class="k">)</span>
EXPORT<span class="w"> </span><span class="nv">IS_ADMIN</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>

timoni<span class="w"> </span>bundle<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>bundle.cue<span class="w"> </span>--runtime-from-env
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Mixing values from the Runtime and Environment</p>
<p>When using <code>timoni bundle apply --runtime runtime.cue --runtime-from-env</code>,
the values coming from the Runtime take precedence over the Environment.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024 Stefan Prodan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://cloud-native.slack.com/team/ULPRMFH38" target="_blank" rel="noopener" title="cloud-native.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/stefanprodan" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396h-95.6L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5 78.2-89.5h47.5zm-37.8 251.6L153.4 142.9h-28.3l171.8 224.7h26.3z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/stefanprodan" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.sections", "navigation.top", "navigation.tabs"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>